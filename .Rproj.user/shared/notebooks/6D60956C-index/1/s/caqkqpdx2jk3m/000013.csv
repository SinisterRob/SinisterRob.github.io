"0","bb_data %<>% mutate(ScoreGap = WScore - LScore)"
"0",""
"0","# Number of Wins"
"0","num_win <- bb_data %>%"
"0","  group_by(Season, WTeamID) %>%"
"0","  summarise(NumWins = n()) %>%"
"0","  rename(TeamID = WTeamID)"
"2","`summarise()` has grouped output by 'Season'. You can override using the `.groups` argument."
"0","# Number of Losses"
"0","num_loss <- bb_data %>%"
"0","  group_by(Season, LTeamID) %>%"
"0","  summarise(NumLosses = n()) %>%"
"0","  rename(TeamID = LTeamID)"
"2","`summarise()` has grouped output by 'Season'. You can override using the `.groups` argument."
"0","# Average Score Gap for Wins"
"0","gap_win <- bb_data %>%"
"0","  group_by(Season, WTeamID) %>%"
"0","  summarise(GapWins = mean(ScoreGap, na.rm = TRUE)) %>%"
"0","  rename(TeamID = WTeamID)"
"2","`summarise()` has grouped output by 'Season'. You can override using the `.groups` argument."
"0","# Average Score Gap for Losses"
"0","gap_loss <- bb_data %>%"
"0","  group_by(Season, LTeamID) %>%"
"0","  summarise(GapLosses = mean(ScoreGap, na.rm = TRUE)) %>%"
"0","  rename(TeamID = LTeamID)"
"2","`summarise()` has grouped output by 'Season'. You can override using the `.groups` argument."
"0","# Features for each season"
"0","bb_features_w <- "
"0","  bb_data %>%"
"0","  select(Season, WTeamID) %>% "
"0","  unique() %>% "
"0","  rename(TeamID = WTeamID)"
"0",""
"0","bb_features_l <- "
"0","  bb_data %>%"
"0","  select(Season, LTeamID) %>% "
"0","  unique() %>% "
"0","  rename(TeamID = LTeamID)"
"0",""
"0","bb_features <- "
"0","  bind_rows(bb_features_w, bb_features_l) %>% "
"0","  distinct() %>% "
"0","  arrange(Season, TeamID)"
"0",""
"0","# Merge features df with num_win, num_loss, gap_win, gap_loss."
"0","bb_features %<>% "
"0","  merge(num_win, by = c(""Season"", ""TeamID""), all.x = TRUE) %>% "
"0","  merge(num_loss, by = c(""Season"", ""TeamID""), all.x = TRUE) %>% "
"0","  merge(gap_win, by = c(""Season"", ""TeamID""), all.x = TRUE) %>% "
"0","  merge(gap_loss, by = c(""Season"", ""TeamID""), all.x = TRUE)"
"0",""
"0","bb_features %<>% replace(is.na(.), 0)"
"0",""
"0","bb_features %<>% "
"0","  mutate(WinRatio = NumWins / (NumWins + NumLosses),"
"0","         GapAvg = (NumWins * GapWins - NumLosses * GapLosses) / (NumWins + NumLosses)) %>% "
"0","  select(-NumWins, -NumLosses, -GapWins, -GapLosses)"
