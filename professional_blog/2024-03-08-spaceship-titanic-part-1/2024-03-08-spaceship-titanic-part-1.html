<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="ðŸ‘½ Predict which passengers are transported to an alternate dimension. ðŸ‘½">

<title>bites | brews | paws - Spaceship Titanic - Introduction to Bayesian Models - Part 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../..//img/favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-TLJMCG2VMV"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-TLJMCG2VMV', { 'anonymize_ip': true});
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="bites | brews | paws - Spaceship Titanic - Introduction to Bayesian Models - Part 1">
<meta property="og:description" content="ðŸ‘½ Predict which passengers are transported to an alternate dimension. ðŸ‘½">
<meta property="og:image" content="https://sinisterrob.github.io/../../img/titanic.png">
<meta property="og:site_name" content="bites | brews | paws">
<meta property="og:locale" content="es_ES">
<meta name="twitter:title" content="bites | brews | paws - Spaceship Titanic - Introduction to Bayesian Models - Part 1">
<meta name="twitter:description" content="ðŸ‘½ Predict which passengers are transported to an alternate dimension. ðŸ‘½">
<meta name="twitter:image" content="https://sinisterrob.github.io/../../img/titanic.png">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">bites | brews | paws</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about_me.html"> 
<span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-personal-reviews" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Personal Reviews</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-personal-reviews">    
        <li>
    <a class="dropdown-item" href="../../food_review.html">
 <span class="dropdown-text">Food Reviews</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../music_review.html">
 <span class="dropdown-text">Music Reviews</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../book_review.html">
 <span class="dropdown-text">Book Reviews</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-blogs--analysis" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Blogs &amp; Analysis</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-blogs--analysis">    
        <li>
    <a class="dropdown-item" href="../../chess_analysis.html">
 <span class="dropdown-text">Chess Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../personal_blog.html">
 <span class="dropdown-text">Personal Blog</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../professional_blog.html">
 <span class="dropdown-text">Professional Blog</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../photography.html"> 
<span class="menu-text">Photography</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#part-1-data-intake-and-exploration" id="toc-part-1-data-intake-and-exploration" class="nav-link" data-scroll-target="#part-1-data-intake-and-exploration">Part 1: Data Intake and Exploration</a>
  <ul class="collapse">
  <li><a href="#load-the-data" id="toc-load-the-data" class="nav-link" data-scroll-target="#load-the-data">Load the Data</a></li>
  <li><a href="#data-exploration-modeling-approach" id="toc-data-exploration-modeling-approach" class="nav-link" data-scroll-target="#data-exploration-modeling-approach">Data Exploration &amp; Modeling Approach</a></li>
  <li><a href="#part-2-preview-building-the-model" id="toc-part-2-preview-building-the-model" class="nav-link" data-scroll-target="#part-2-preview-building-the-model">Part 2 Preview: Building the Model</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Spaceship Titanic - Introduction to Bayesian Models - Part 1</h1>
</div>

<div>
  <div class="description">
    ðŸ‘½ Predict which passengers are transported to an alternate dimension. ðŸ‘½
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div style="text-align: center;">
<p><img src="./../../img/titanic.png" class="img-fluid" width="300"></p>
</div>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This post is going to be an explanation on how to use Stan to write a simple Bayesian (probabilistic) model.</p>
<p>The analysis is broken into parts to be more digestible and beginner-friendly, so that I am able to document the entire model building process from start to finish including data exploration, writing Stan code, and model validation.</p>
<p>I will be working with the data from the <a href="https://www.kaggle.com/competitions/spaceship-titanic">Spaceship Titanic</a> competition, which is a beginner friendly spin-off of the original Titanic dataset where the goal is to predict who on the Titanic lived and died after it crashed. In this challenge, I will be walking through the steps to create a Bayesian model that predicts whether passengers are transported to an alternate dimension or not.</p>
</section>
<section id="part-1-data-intake-and-exploration" class="level1">
<h1>Part 1: Data Intake and Exploration</h1>
<section id="load-the-data" class="level2">
<h2 class="anchored" data-anchor-id="load-the-data">Load the Data</h2>
<p>The first steps in any data analysis done in R will be loading the libraries you want to use and reading in the data to a data.frame or a data.table object. I load the <a href="https://mc-stan.org/rstan/">rstan package</a> because I will be writing the main part of the model in Stan, and set the options to use all of the cores on my computer and not recompile the model every time I run it (Stan models have to be compiled and that can be a slow process to repeat.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rstan)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mgcv)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">mc.cores =</span> parallel<span class="sc">::</span><span class="fu">detectCores</span>())</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">rstan_options</span>(<span class="at">auto_write =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>sst_data <span class="ot">&lt;-</span> data.table<span class="sc">::</span><span class="fu">fread</span>(<span class="st">"../../data/train.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For reference, I will show the first few rows of the data set. For the sake of keeping the post shorter, you can refer to the <a href="https://www.kaggle.com/competitions/spaceship-titanic">Kaggle link</a> for the definitions of each of the data fields.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(sst_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 4%">
<col style="width: 10%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 12%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">PassengerId</th>
<th style="text-align: left;">HomePlanet</th>
<th style="text-align: left;">CryoSleep</th>
<th style="text-align: left;">Cabin</th>
<th style="text-align: left;">Destination</th>
<th style="text-align: right;">Age</th>
<th style="text-align: left;">VIP</th>
<th style="text-align: right;">RoomService</th>
<th style="text-align: right;">FoodCourt</th>
<th style="text-align: right;">ShoppingMall</th>
<th style="text-align: right;">Spa</th>
<th style="text-align: right;">VRDeck</th>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Transported</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0001_01</td>
<td style="text-align: left;">Europa</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">B/0/P</td>
<td style="text-align: left;">TRAPPIST-1e</td>
<td style="text-align: right;">39</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Maham Ofracculy</td>
<td style="text-align: left;">FALSE</td>
</tr>
<tr class="even">
<td style="text-align: left;">0002_01</td>
<td style="text-align: left;">Earth</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">F/0/S</td>
<td style="text-align: left;">TRAPPIST-1e</td>
<td style="text-align: right;">24</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">109</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">549</td>
<td style="text-align: right;">44</td>
<td style="text-align: left;">Juanna Vines</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0003_01</td>
<td style="text-align: left;">Europa</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">A/0/S</td>
<td style="text-align: left;">TRAPPIST-1e</td>
<td style="text-align: right;">58</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">43</td>
<td style="text-align: right;">3576</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6715</td>
<td style="text-align: right;">49</td>
<td style="text-align: left;">Altark Susent</td>
<td style="text-align: left;">FALSE</td>
</tr>
<tr class="even">
<td style="text-align: left;">0003_02</td>
<td style="text-align: left;">Europa</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">A/0/S</td>
<td style="text-align: left;">TRAPPIST-1e</td>
<td style="text-align: right;">33</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1283</td>
<td style="text-align: right;">371</td>
<td style="text-align: right;">3329</td>
<td style="text-align: right;">193</td>
<td style="text-align: left;">Solam Susent</td>
<td style="text-align: left;">FALSE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0004_01</td>
<td style="text-align: left;">Earth</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">F/1/S</td>
<td style="text-align: left;">TRAPPIST-1e</td>
<td style="text-align: right;">16</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">303</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">151</td>
<td style="text-align: right;">565</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Willy Santantines</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: left;">0005_01</td>
<td style="text-align: left;">Earth</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">F/0/P</td>
<td style="text-align: left;">PSO J318.5-22</td>
<td style="text-align: right;">44</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">483</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">291</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Sandie Hinetthews</td>
<td style="text-align: left;">TRUE</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="data-exploration-modeling-approach" class="level2">
<h2 class="anchored" data-anchor-id="data-exploration-modeling-approach">Data Exploration &amp; Modeling Approach</h2>
<p>After looking at the predictive fields available in this data set, the first thing I try to do is come up with a plan to approach the modeling structure.</p>
<p>I have a couple of initial thoughts here:</p>
<ul>
<li><p>We are trying to predict the Transported field which is a boolean variable: either TRUE or FALSE.</p></li>
<li><p>This leads me to believe that <a href="https://en.wikipedia.org/wiki/Logistic_regression">logistic regression</a> is probably the best and simplest modelling approach.</p></li>
<li><p>In statistical terms, this means we want a model with the following structure: <span class="math display">\[
\log\left(\frac{\pi}{1-\pi}\right) = \alpha + \beta X
\]</span></p></li>
<li><p>This transformation (often called the logit function or <a href="https://en.wikipedia.org/wiki/Logit">log-odds</a>) is useful, because it is a function that maps values between 0 and 1, like probabilities, to real numbers.</p></li>
<li><p>In this model, <span class="math inline">\(\pi\)</span> will represent our response (Probability % of being Transported) and the <span class="math inline">\(\beta\)</span> will represent our predictive variables, so letâ€™s explore some of the possibilities for <span class="math inline">\(\beta\)</span>.</p></li>
</ul>
<section id="exploring-vip-age-and-homeplanet-variables" class="level3">
<h3 class="anchored" data-anchor-id="exploring-vip-age-and-homeplanet-variables">Exploring VIP, Age, and HomePlanet variables</h3>
<p>I really want to start with a simple model and build from there, so Iâ€™ll start by just examining the relationship between a couple of the explanatory variables and the <code>Transported</code> response variable.</p>
<p>First of all, letâ€™s see how many people were Transported in total.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>sst_data <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Transported) <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Proportion =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Transported    n Proportion
1:       FALSE 4315  0.4963764
2:        TRUE 4378  0.5036236</code></pre>
</div>
</div>
<p>Looks like a pretty even split, which is good. It might be harder to model a huge imbalance of response classes, especially if you donâ€™t have a lot of data observations in the first place.</p>
<p>Iâ€™ve found this type of visual exploratory analysis is useful to see which of our data variables might provide some information that explains a difference in categorizing who was transported and who was not transported.</p>
<section id="age" class="level4">
<h4 class="anchored" data-anchor-id="age"><strong>Age</strong></h4>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2024-03-08-spaceship-titanic-part-1_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
<p>There are 179 missing Age values in the dataset (which we will have to handle later), and it looks like passengers from Age 0 to about Age 17 are much more likely to be transported, and then it kind of levels off after that.</p>
</section>
<section id="vip" class="level4">
<h4 class="anchored" data-anchor-id="vip"><strong>VIP</strong></h4>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2024-03-08-spaceship-titanic-part-1_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
<p>VIPs were transported at a 38.2% rate, while non-VIPs were transported at a 50.6% rate.</p>
</section>
<section id="homeplanet" class="level4">
<h4 class="anchored" data-anchor-id="homeplanet"><strong>HomePlanet</strong></h4>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2024-03-08-spaceship-titanic-part-1_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>It appears there are three possible Home Planets: Earth, Europa, and Mars.</p></li>
<li><p>They all have different Transportation proportions which makes it a great candidate for a categorical predictive variable.</p></li>
<li><p>The aliens really seem to have taken a liking to residents from Europa.</p></li>
</ul>
</section>
</section>
<section id="summary" class="level3">
<h3 class="anchored" data-anchor-id="summary">Summary</h3>
<p>To summarize, it looks like a non-VIP from Europa that is between Age 0 and 17 has the highest risk factors for being abducted.</p>
<ul>
<li>Itâ€™s good to do sense checks on your exploration is saying, so letâ€™s see if we can take a slice of the data (e.g.: a population that has two out of any three of these risk factors) and see how strong the effects we discovered are.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>sst_data <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">VIP</span><span class="st">`</span>, <span class="st">`</span><span class="at">Age</span><span class="st">`</span>, <span class="st">`</span><span class="at">HomePlanet</span><span class="st">`</span>, <span class="st">`</span><span class="at">Transported</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((<span class="st">`</span><span class="at">VIP</span><span class="st">`</span> <span class="sc">==</span> <span class="cn">FALSE</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">Age</span><span class="st">`</span> <span class="sc">&lt;</span> <span class="dv">18</span>) <span class="sc">|</span> (<span class="st">`</span><span class="at">VIP</span><span class="st">`</span> <span class="sc">==</span> <span class="cn">FALSE</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">HomePlanet</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Europa"</span>) <span class="sc">|</span> (<span class="st">`</span><span class="at">Age</span><span class="st">`</span> <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">HomePlanet</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Europa"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Transported)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Transported    n
1:       FALSE 1180
2:        TRUE 2119</code></pre>
</div>
</div>
<p>It definitely seems like we have some potential predictive power if we use these variables since we were able to pull out twice as many TRUE as FALSE using this naive approach, so in the next post I will explore how to take these three insights and formally build them into a probability model using Stan.</p>
</section>
</section>
<section id="part-2-preview-building-the-model" class="level2">
<h2 class="anchored" data-anchor-id="part-2-preview-building-the-model">Part 2 Preview: Building the Model</h2>
<p>I think thatâ€™s enough data exploration content for one blog post - thanks for reading and my goal going forward will be to create short and digestible posts that are easy to casually read and understand without investing too much time.</p>
<p>Keep these data insights that I just discovered in mind, since those will be used in Part 2 to describe a Bayesian probability model on the odds our poor travelers were subjected to alien transportation.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>